<PRE>

MKHYBRID(8)                                           MKHYBRID(8)

<H2>NAME</H2>
       mkhybrid  - create an hybrid ISO9660/JOLIET/HFS filesystem
       with optional Rock Ridge attributes.

<H2>SYNOPSIS</H2>
       <b>mkhybrid</b> [ <b>-a</b> ] [ <b>-b</b> <i>boot</i><b>_</b><i>image</i> ] [ <b>-c</b> <i>boot</i><b>_</b><i>catalog</i> ] 
       [ <b>-A</b> <i>application</i><b>_</b><i>id</i>  ]  [  <b>-f</b>  ] [ <b>-d</b> ] [ <b>-D</b> ] [ <b>-hide</b> <i>glob</i> ]
       [ <b>-hide-joliet</b> <i>glob</i> ] [ <b>-J</b> ] [ <b>-l</b> ]  [  <b>-L</b>  ]  
       [ <b>-no-split-</b> <b>symlink-components</b> ] [ <b>-no-split-symlink-fields</b> ] 
       [ <b>-p</b> <i>preparer</i> ] [ <b>-print-size</b> ] [ <b>-P</b> <i>publisher</i> ] [ <b>-quiet</b>  ]  
       [ <b>-r</b>  ] [ <b>-R</b> ] [ <b>-T</b> ] [ <b>-v</b> ] [ <b>-V</b> <i>volid</i> ]  [ <b>-x</b> <i>path</i> ] [ <b>-z</b> ]
       [ <b>-m</b> <i>glob</i> ] [ <b>-hfs</b> | <b>-apple</b> ]  [  <b>-map</b>  <i>mapping</i><b>_</b><i>file</i>  ]  
       [ <b>-magic</b> <i>magic</i><b>_</b><i>file</i> ] [ <b>-no-mac-files</b> ] [ <b>-probe</b> ] [ <b>--cap</b> ]
       [ <b>--netatalk</b> ] [ <b>--double</b> ] [ <b>--ethershare</b> ]  [ <b>--ushare</b>  ]
       [ <b>--exchange</b> ] [ <b>--sgi</b> ] [ <b>--xinet</b> ] [ <b>--macbin</b> ] 
       [ <b>--sin-</b> <b>gle</b> ] [ <b>-mac-name</b> ] [ <b>-boot-hfs-file</b>  <i>driver</i><b>_</b><i>file</i> ]  
       [ <b>-hide-hfs</b>  <i>glob</i> ] [ <b>-log-file</b> <i>log</i><b>_</b><i>file</i> ] 
       <b>-o</b> <i>filename</i> <i>path-</i> <i>spec</i> <i>[pathspec]</i>

<H2>DESCRIPTION</H2>
       <b>mkhybrid</b> is effectively a pre-mastering program to  gener-
       ate  an  HFS/ISO9660/JOLIET hybrid filesystem. It is based
       on <b>mkisofs</b>(1) and will generate a pure ISO9660  filesystem
       unless the HFS hybrid command line options are given.

       <b>mkhybrid</b>  can  generate  a  <i>true</i>  (or  <i>shared)</i>  HFS hybrid
       filesystem. The same files are  seen  as  HFS  files  when
       accessed  from  a  Macintosh  and  as  ISO9660  files when
       accessed from other machines. HFS stands for  <i>Hierarchical</i>
       <i>File</i>  <i>System</i>  and is the native file system used on Macin-
       tosh computers.

       As an alternative, <b>mkhybrid</b> can generate the <i>Apple</i>  <i>Enten-</i>
       <i>sions</i>  <i>to</i>  <i>ISO9660</i> for each file. These extensions provide
       each file with CREATOR, TYPE and certain Finder Flags when
       accessed  from a Macintosh. See the <b>MACINTOSH</b> <b>FILE</b> <b>FORMATS</b>
       section below.

       <b>mkhybrid</b> takes a snapshot of a given directory  tree,  and
       generates  a  binary  image  which  will  correspond to an
       ISO9660 or HFS filesystem when written to a block  device.

       <b>mkhybrid</b>  is  also  capable  of  generating the System Use
       Sharing Protocol  records  specified  by  the  Rock  Ridge
       Interchange  Protocol.   This  is used to further describe
       the files in the iso9660 filesystem to a  unix  host,  and
       provides  information  such  as longer filenames, uid/gid,
       posix permissions, and block and character devices.

       Each file written to the iso9660 filesystem  must  have  a
       filename  in the 8.3 format (8 characters, period, 3 char-
       acters, all upper case), even if Rock  Ridge  is  in  use.
       This filename is used on systems that are not able to make
       use of the Rock Ridge extensions  (such  as  MS-DOS),  and
       each filename in each directory must be different from the
       other filenames in the same directory.  <b>mkhybrid</b> generally
       tries  to  form correct names by forcing the unix filename
       to upper case and truncating as required, but often  times
       this  yields  unsatisfactory  results when there are cases
       where the truncated names are not  all  unique.   <b>mkhybrid</b>
       assigns weightings to each filename, and if two names that
       are otherwise the same are found the name with  the  lower
       priority  is renamed to have a 3 digit number as an exten-
       sion (where the number is guaranteed to  be  unique).   An
       example of this would be the files foo.bar and foo.bar.~1~
       - the file foo.bar.~1~ would be written as  FOO.000;1  and
       the file foo.bar would be written as FOO.BAR;1

       When  used  with the HFS options, <b>mkhybrid</b> will attempt to
       recognise files stored in a number of Apple/Unix file for-
       mats  and will copy the data and resource forks as well as
       any relevant finder information. See  the  <b>MACINTOSH</b>  <b>FILE</b>
       <b>FORMATS</b> section below for more about formats <b>mkhybrid</b> sup-
       ports.

       Note that <b>mkhybrid</b> is not designed to communicate with the
       writer  directly.   Most  writers have proprietary command
       sets which vary from one manufacturer to another, and  you
       need  a  specialized  tool to actually burn the disk.  The
       <b>cdwrite</b> utility is one such tool that runs under Linux and
       performs  this  task.   The  latest  version of <b>cdwrite</b> is
       capable of communicating with Phillips/IMS/Kodak,  HP  and
       Yamaha drives.  Most writers come with some version of DOS
       software that allows a direct image  copy  of  an  iso9660
       image  to  the  writer.  The current version of <b>cdwrite</b> is
       available     from      sunsite.unc.edu:      /utils/disk-
       management/cdwrite-2.0.tar.gz  Note  that  cdwrite has not
       been actively maintained in recent times.

       The <b>cdrecord</b> utility is another utility capable of burning
       an  actual disc.  The latest version of <b>cdrecord</b> is avail-
       able from ftp://ftp.fokus.gmd.de/pub/unix/cdrecord

       Also you should know that most cd writers are very partic-
       ular  about  timing.   Once  you start to burn a disc, you
       cannot let their buffer empty before you are done, or  you
       will end up with a corrupt disc.  Thus it is critical that
       you be able to maintain an uninterrupted  data  stream  to
       the  writer  for  the  entire  time that the disc is being
       written.

       <b>path</b> is the path of the directory tree to be  copied  into
       the  iso9660 filesystem.  Multiple paths can be specified,
       and <b>mkhybrid</b> will merge the files  found  in  all  of  the
       specified path components to form the cdrom image.

       It is possible to graft the paths at points other than the
       root directory, and it  is  possible  to  graft  files  or
       directories onto the cdrom image with names different than
       what they have in the source filesystem.  This is  easiest
       to  illustrate with a couple of examples.   Let's start by
       assuming that a local file ../old.lis exists, and you wish
       to include it in the cdrom image.

            foo/bar/=../old.lis

       will  include  the  file  old.lis  in  the  cdrom image at
       /foo/bar/old.lis, while

            foo/bar/xxx=../old.lis

       will include the  file  old.lis  in  the  cdrom  image  at
       /foo/bar/xxx.   The  same  sort of syntax can be used with
       directories as well.  <b>mkhybrid</b> will create any directories
       required  such  that  the  graft points exist on the cdrom
       image - the directories do not need to appear  in  one  of
       the  paths.   Any  directories that are created on the fly
       like this will have permissions  0555  and  appear  to  be
       owned  by  the person running mkhybrid.  If you wish other
       permissions or owners of the intermediate directories, the
       easiest solution is to create real directories in the path
       such that mkhybrid doesn't have to invent them.

       <i>mkhybrid</i> will also run on Win95/NT4 machines when compiled
       with      Cygnus'      GNU-Win32      (available      from
       http://www.cygnus.com/misc/gnu-win32/).   Therefore   most
       references  in  this man page to <i>Unix</i> can be replaced with
       <i>Win32</i>.

       OS/2 port is compiled with EMX gcc (patched <i>Unix</i> source). 

<H2>OPTIONS</H2>
       <i>-a</i>
              Include all files on the iso9660 filesystem.   Nor-
              mally  files that contain the characters '~' or '#'
              will not be included (these  are  typically  backup
              files for editors under unix).

       <i>-A</i> <i>application</i><b>_</b><i>id</i>
              Specifies  a  text string that will be written into
              the volume header.  This should describe the appli-
              cation that will be on the disc.  There is space on
              the disc for 128 characters of  information.   This
              parameter  can  also  be set in the file <i>.mkisofsrc</i>
              with APPI=id.  If specified  in  both  places,  the
              command line version is used.

       <i>-b</i> <i>boot</i><b>_</b><i>image</i>
              Specifies  the  path and filename of the boot image
              to be used when making an "El Torito" bootable  CD.
              The  pathname  must  be relative to the source path
              specified to <b>mkhybrid.</b>  This option is required  to
              make a bootable CD.  The boot image must be exactly
              the size of either a  1.2,  1.44,  or  a  2.88  meg
              floppy, and <b>mkhybrid</b> will use this size when creat-
              ing the output iso9660 filesystem.  It  is  assumed
              that  the first 512 byte sector should be read from
              the boot image (it is essentially emulating a  nor-
              mal floppy drive).  This will work, for example, if
              the boot image is a LILO based boot floppy.

       <i>-c</i> <i>boot</i><b>_</b><i>catalog</i>
              Specifies the path and filename of the boot catalog
              to  be used when making an "El Torito" bootable CD.
              The pathname must be relative to  the  source  path
              specified  to <b>mkhybrid.</b>  This option is required to
              make a bootable CD.  This file will be  created  by
              <b>mkhybrid</b>  in  the source filesystem, so be sure the
              specified filename does not conflict with an exist-
              ing  file,  as it will be quietly overwritten! Usu-
              ally a name like "boot.catalog" is chosen.

       <i>-d</i>
              Omit trailing period from files that do not have  a
              period.  This violates the ISO9660 standard, but it
              happens to work on many systems.  Use with caution.

       <i>-D</i>
              Do  not  use deep directory relocation, and instead
              just pack them in the way we see them.   This  vio-
              lates  the  ISO9660  standard, but it works on many
              systems.  Use with caution.

       <i>-f</i>
              Follow symbolic links when generating the  filesys-
              tem.   When  this  option  is  not in use, symbolic
              links will be entered using Rock Ridge if  enabled,
              otherwise the file will be ignored.

       <i>-hide</i> <i>glob</i>
              Hide  <i>glob</i>  from  being seen on the ISO9660 or Rock
              Ridge directory.  <i>glob</i> is a  shell  wild-card-style
              pattern that must match any part of the filename or
              path.  Multiple globs may be hidden (up  to  1000).
              If  <i>glob</i>  matches a directory, then the contents of
              that directory will  be  hidden.   All  the  hidden
              files  will still be written to the output CD image
              file.  Should be used with the <i>-hide-joliet</i> option.

       <i>-hide-joliet</i> <i>glob</i>
              Hide  <i>glob</i> from being seen on the Joliet directory.
              <i>glob</i> is a shell wild-card-style pattern  that  must
              match  any  part of the filename or path.  Multiple
              globs may be hidden (up to 1000).  If <i>glob</i>  matches
              a  directory,  then  the contents of that directory
              will be hidden.  All the hidden files will still be
              written  to  the  output  CD image file.  Should be
              used with the <i>-hide</i> option.

       <i>-l</i>
              Allow full 32 character  filenames.   Normally  the
              ISO9660  filename will be in an 8.3 format which is
              compatible with MS-DOS,  even  though  the  ISO9660
              standard  allows  filenames of up to 32 characters.
              If you use this option, the disc may  be  difficult
              to  use on a MS-DOS system, but this comes in handy
              on some other systems (such  as  the  Amiga).   Use
              with caution.

       <i>-J</i>
              Generate  Joliet  directory  records in addition to
              regular iso9660 file names.  This is primarily use-
              ful  when the discs are to be used on Windows-NT or
              Windows-95 machines.    The  Joliet  filenames  are
              specified in Unicode and each path component can be
              up to 64 Unicode characters long.

       <i>-L</i>
              Allow filenames to begin with a period.  Usually, a
              leading dot is replaced with an underscore in order
              to maintain MS-DOS compatibility.

       <i>-m</i> <i>glob</i>
              Exclude <i>glob</i> from being written to CDROM.  <i>glob</i>  is
              a  shell  wild-card-style  pattern  that must match
              part of the filename (not the path as  with  option
              <b>-x</b>).   Technically  <i>glob</i>  is  matched  against  the
              <i>d-&gt;d</i><b>_</b><i>name</i> part of the  directory  entry.   Multiple
              globs may be excluded (up to 1000).  Example:

              mkhybrid -o rom -m '*.o' -m core -m foobar

              would  exclude  all  files  ending  in ".o", called
              "core" or "foobar" to be copied to CDROM. Note that
              if  you had a directory called "foobar" it too (and
              of course all its descendants) would be excluded.

       <i>-M</i> <i>path</i>
              Specifies path to  existing  iso9660  image  to  be
              merged.   The output of <b>mkhybrid</b> will be a new ses-
              sion which should get written to  the  end  of  the
              image  specified  in  -M.   Typically this requires
              multi-session capability for the recorder and cdrom
              drive  that  you are attempting to write this image
              to.  Support for this is  not  yet  100%  complete,
              because  some handshaking is required between mkhy-
              brid and cdwrite in order  to  determine  the  next
              writable address on the cdrom.

       <i>-N</i>
              Omit version numbers from ISO9660 file names.  This
              may violate the ISO9660 standard, but no one really
              uses the version numbers anyway.  Use with caution.

       <i>-no-split-symlink-components</i>
              Don't split the SL components, but begin a new Con-
              tinuation  Area  (CE)  instead. This may waste some
              space, but the SunOS 4.1.4 cdrom driver has  a  bug
              in  reading split SL components (link_size = compo-
              nent_size instead of link_size +=  component_size).

       <i>-no-split-symlink-fields</i>
              Don't split the SL fields, but begin a new Continu-
              ation Area (CE) instead. This may waste some space,
              but  the SunOS 4.1.4 and Solaris 2.5.1 cdrom driver
              have a bug in reading split SL fields (a `/' can be
              dropped).

       <i>-o</i> <i>filename</i>
              is  the  name  of  the  file  to  which the iso9660
              filesystem image should be written.  This can be  a
              disk  file,  a  tape  drive,  or  it can correspond
              directly to the device name  of  the  optical  disc
              writer.   If  not  specified, stdout is used.  Note
              that the output can also be a block special  device
              for  a  regular  disk drive, in which case the disk
              partition can be mounted  and  examined  to  ensure
              that the premastering was done correctly.

       <i>-P</i> <i>publisher</i><b>_</b><i>id</i>
              Specifies  a  text string that will be written into
              the volume header.  This should describe  the  pub-
              lisher of the CDROM, usually with a mailing address
              and phone number.  There is space on the  disc  for
              128  characters of information.  This parameter can
              also be set in the file <i>.mkisofsrc</i> with PUBL=.   If
              specified  in both places, the command line version
              is used.

       <i>-p</i> <i>preparer</i><b>_</b><i>id</i>
              Specifies a text string that will be  written  into
              the  volume  header.  This should describe the pre-
              parer of the CDROM, usually with a mailing  address
              and  phone  number.  There is space on the disc for
              128 characters of information.  This parameter  can
              also  be set in the file <i>.mkisofsrc</i> with PREP=.  If
              specified in both places, the command line  version
              is used.

       <i>-print-size</i>
              Print  estimated  filesystem  size  and  exit. This
              option is needed for Disk At  Once  mode  and  with
              some   CD-R   drives   when  piping  directly  into
              <b>cdrecord.</b>  In this case it is needed  to  know  the
              size  of  the  filesystem  before  the  actual  CD-
              creation is done.  The option -print-size allows to
              get  this  size  from  a "dry-run" before the CD is
              actually written.

       <i>-R</i>
              Generate SUSP and RR records using the  Rock  Ridge
              protocol  to  further  describe  the  files  on the
              iso9660 filesystem.

       <i>-r</i>
              This is like the -R option, but file ownership  and
              modes  are  set to more useful values.  The uid and
              gid are set to zero, because they are usually  only
              useful  on  the  author's system, and not useful to
              the client.  All the file read bits are  set  true,
              so that files and directories are globally readable
              on the client.  If any execute bit  is  set  for  a
              file, set all of the execute bits, so that executa-
              bles are globally executable on the client.  If any
              search  bit  is set for a directory, set all of the
              search  bits,  so  that  directories  are  globally
              searchable  on  the  client.   All  write  bits are
              cleared, because the CD-Rom will be  mounted  read-
              only  in any case.  If any of the special mode bits
              are set, clear them, because  file  locks  are  not
              useful  on a read-only file system, and set-id bits
              are not desirable for uid 0 or gid 0.  When used on
              Win32, the execute bit is set on <i>all</i> files.

       <i>-T</i>
              Generate  a file TRANS.TBL in each directory on the
              CDROM, which can be used on non-Rock Ridge  capable
              systems  to  help establish the correct file names.
              There is also information present in the file  that
              indicates the major and minor numbers for block and
              character devices, and each symlink has the name of
              the link file given.

       <i>-V</i> <i>volid</i>
              Specifies the volume ID to be written into the mas-
              ter block.  This parameter can also be set  in  the
              file <i>.mkisofsrc</i> with VOLI=id.  If specified in both
              places, the command line version is used.

       <i>-v</i>
              Verbose execution.

       <i>-x</i> <i>path</i>
              Exclude <i>path</i> from being  written  to  CDROM.   <i>path</i>
              must  be  the  complete  pathname that results from
              concatenating the pathname given  as  command  line
              argument  and  the path relative to this directory.
              Multiple paths may be excluded (up to 1000).  Exam-
              ple:

              mkhybrid -o cd -x /local/dir1 -x /local/dir2 /local

       <i>-z</i> 
              Generate special  SUSP  records  for  transparently
              compressed files.  This is only of use and interest
              for hosts that support  transparent  decompression.
              This  is  an experimental feature, and no hosts yet
              support this, but there are ALPHA patches for Linux
              that can make use of this feature.

<H2>HFS OPTIONS</H2>
       <i>-hfs</i>
              Create  an  ISO9660/HFS  hybrid CD. By default, all
              source files are checked to  attempt  to  recognise
              files  stored  in  one of the known Apple/Unix file
              formats.  See the <b>MACINTOSH</b>  <b>FILE</b>  <b>FORMATS</b>  section
              below for more about these formats

       <i>-apple</i> 
              Create an ISO9660 CD with Apple's extensions. Simi-
              lar to the  <i>-hfs</i>  option,  except  that  the  Apple
              Extensions to ISO9660 are added instead of creating
              an HFS hybrid volume.

       <i>-map</i> <i>mapping</i><b>_</b><i>file</i>
              Use the <i>mapping</i><b>_</b><i>file</i> to set the  CREATOR  and  TYPE
              information  for  a  file  based  on the filename's
              extension. A filename is mapped only if it  is  not
              one  of  the  know Apple/Unix file formats. See the
              <b>CREATOR/TYPE</b> section below.

       <i>-magic</i> <i>magic</i><b>_</b><i>file</i>
              The CREATOR and TYPE information is set by using  a
              file's <i>magic</i> <i>number</i> (usually the first few bytes of
              a file). The <i>magic</i><b>_</b><i>file</i> is only used if a  file  is
              not  one  of  the known Apple/Unix file formats, or
              the filename extension has not  been  mapped  using
              the <i>-map</i> option. See the <b>CREATOR/TYPE</b> section below
              for more details.

       <i>-no-mac-files</i>
              Disables searching for Apple/Unix files. This  will
              speed  up processing if there are none of the known
              Apple/Unix format files  in  the  source  directory
              trees (the source directories just contain ordinary
              files). The <i>-map</i> and/or <i>-magic</i> option can  be  used
              to set the CREATOR and TYPE for each file.

       <i>-probe</i> 
              Search  the  contents  of files for Apple/Unix file
              formats. When <i>-hfs</i> or <i>-apple</i> is used, mkhybrid will
              attempt  to  work  out  automatically  what type of
              Apple/Unix format each file is. However,  the  only
              way to check for <i>MacBinary</i> and <i>AppleSingle</i> files is
              to open and read them. Therefore, if  <i>MacBinary</i>  or
              <i>AppleSingle</i>  format  files are being used, then you
              need to give this option.  This saves  opening  and
              searching   every   file  if  no  <i>MacBinary</i>  and/or
              <i>AppleSingle</i> files exist. Or you could use the rele-
              vant <i>double</i> <i>dash</i> options given below.

       <i>--cap</i>
              Look  for  AUFS CAP Macintosh files. Search for CAP
              Apple/Unix file formats  only.  Searching  for  the
              other possible Apple/Unix file formats is disabled,
              unless other <i>double</i> <i>dash</i> options are given.

       <i>--netatalk</i>
              Look for NETATALK Macintosh files

       <i>--double</i>
              Look for AppleDouble Macintosh files

       <i>--ethershare</i>
              Look for Helios EtherShare Macintosh files

       <i>--ushare</i>
              Look for IPT UShare Macintosh files

       <i>--exchange</i>
              Look for PC Exchange Macintosh files

       <i>--sgi</i> 
              Look for SGI Macintosh files

       <i>--xinet</i>
              Look for XINET Macintosh files

       <i>--macbin</i>
              Look for MacBinary Macintosh files

       <i>--single</i>
              Look for AppleSingle Macintosh files

       <i>-mac-name</i>
              Use the HFS filename as the starting point for  the
              ISO9660,  Joliet and Rock Ridge file names. See the
              <b>MACINTOSH</b> <b>FILE</b> <b>NAMES</b> section below for more  infor-
              mation.

       <i>-boot-hfs-file</i> <i>driver</i><b>_</b><i>file</i>
              Installs  the  <i>driver</i><b>_</b><i>file</i>  that  <i>may</i>  make  the CD
              bootable on a Macintosh. See the  <b>HFS</b>  <b>BOOT</b>  <b>DRIVER</b>
              section below.

       <i>-hide-hfs</i> <i>glob</i>
              Hide  <i>glob</i>  from the HFS volume. The file or direc-
              tory will still exist in the ISO9660 and/or  Joliet
              directory.  <i>glob</i> is a shell wild-card-style pattern
              that must match any part of the  filename  Multiple
              globs may be excluded (up to 1000).  Example:

              mkhybrid -o rom -hfs -hide-hfs '*.o' -hide-hfs foo-
              bar

              would exclude all files ending in  ".o"  or  called
              "foobar"  from the HFS volume. Note that if you had
              a directory called "foobar" it too (and  of  course
              all  its  descendants) would be excluded.  The <i>glob</i>
              can also be a path  name  relative  to  the  source
              directories given on the command line. Example:

              mkhybrid -o rom -hfs -hide-hfs src/html src

              would  exclude  just  the  file or directory called
              "html" from the "src" directory. Any other file  or
              directory  called  "html"  in  the tree will not be
              excluded.

       <i>-log-file</i> <i>log</i><b>_</b><i>file</i>
              Redirect all error, warning and informational  mes-
              sages to <i>log</i><b>_</b><i>file</i> instead of the standard error.

CREATOR/TYPE
       A  Macintosh  file  has  two properties associated with it
       which define which application created the file, the  <i>CRE-</i>
       <i>ATOR</i>  and what data the file contains, the <i>TYPE</i>.  Both are
       (exactly) 4 letter strings. Usually this allows  a  Macin-
       tosh user to double-click on a file and launch the correct
       application etc. The CREATOR and TYPE of a particular file
       can  be found by using something like ResEdit (or similar)
       on a Macintosh.

       The CREATOR and TYPE information is stored in all the var-
       ious Apple/Unix encoded files.  For other files it is pos-
       sible to base the  CREATOR  and  TYPE  on  the  filename's
       extension  using  a  <i>mapping</i> file (the <i>-map</i> option) and/or
       using the <i>magic</i> <i>number</i> (usually a <i>signature</i> in  the  first
       few  bytes)  of  a file (the <i>-magic</i> option). If both these
       options are given, then their order on the command line is
       important. If the <i>-map</i> option is given first, then a file-
       name extension match is attempted before  a  magic  number
       match.  However, if the <i>-magic</i> option is given first, then
       a magic number match is attempted before a filename exten-
       sion match.

       If  a  mapping  or  magic file is not used, or no match is
       found then the default CREATOR and TYPE  for  all  regular
       files  can be set by using entries in the <i>.mkisofsrc</i> file,
       otherwise the default CREATOR  and  TYPE  are  'unix'  and
       'TEXT'.

       The  format of the <i>mapping</i> file is the same <i>afpfile</i> format
       as used by <i>aufs</i>.  This  file  has  five  columns  for  the
       <i>extension</i>,  <i>file</i>  <i>translation</i>,  <i>CREATOR</i>, <i>TYPE</i> and <i>Comment</i>.
       Lines starting with the '#' character  are  comment  lines
       and are ignored. An example file would be like:

       <b>Example file-name  mapping  file </b>
  
       <b>EXTN    XLate  CREATOR   TYPE    Comment</b>

       .tif     Raw     '8BIM'    'TIFF'   "Photoshop TIFF image"
       .hqx     Ascii   'BnHq'    'TEXT'   "BinHex file"
       .doc     Raw     'MSWD'    'WDBN'   "Word file"
       .mov     Raw     'TVOD'    'MooV'   "QuickTime Movie"
       *        Ascii   'ttxt'    'TEXT'   "Text file"

       Where:

              The  first  column  <i>EXTN</i>  defines the Unix filename
              extension to be mapped. The default mapping for any
              filename  extension  that  doesn't match is defined
              with the "*" character.

              The <i>Xlate</i> column defines the type of text  transla-
              tion  between  the  Unix  and  Macintosh file it is
              ignored by <i>mkhybrid,</i> but is kept to  be  compatible
              with <i>aufs</i>(1).  Although <i>mkhybrid</i> does not alter the
              contents of a file, if a binary file has it's  TYPE
              set as 'TEXT', it <i>may</i> be read incorrectly on a Mac-
              intosh. Therefore a better choice for  the  default
              TYPE may be '????'

              The  <i>CREATOR</i> and <i>TYPE</i> keywords must be 4 characters
              long and enclosed in single quotes.

              The comment field is enclosed in double quotes - it
              is  ignored by <i>mkhybrid</i>, but is kept to be compati-
              ble with <i>aufs</i>.

       The format of the <i>magic</i> file is almost  identical  to  the
       <i>magic</i>(4) file used by the Linux <i>file</i>(1) command - the rou-
       tines for reading and decoding the <i>magic</i> file is based  on
       the Linux <i>file</i>(1) command.

       This file has four tab separated columns for the <i>byte</i> <i>off-</i>
       <i>set</i>, <i>type</i>, <i>test</i> and <i>message</i>.  Lines starting with the  '#'
       character  are  comment  lines and are ignored. An example
       file would be like:

       <b>Example magic file</b>

       <b>off type    test     message</b> 

       0    string   GIF8      8BIM GIFf GIF image
       0    beshort  0xffd8    8BIM JPEG image data  
       0    string   SIT!      SIT!SIT! StuffIt  Archive 
       0    string   \037\235  LZIV ZIVU standard unix compress 
       0    string   \037\213  GNUz ZIVU gzip  compressed data
       0    string   %!        ASPS TEXT Postscript
       0    string   \004%!    ASPS TEXT PC  Postscript with a ^D to start
       4    string   moov      txtt MooV  QuickTime movie file (moov)
       4    string   mdat      txtt MooV  QuickTime movie file (mdat)

       The format of the file is described in  the  <i>magic</i>(4) man
       page.  The  only difference here is that for each entry in
       the magic file, the <i>message</i> for the initial offset <b>must</b> be
       4  characters for the CREATOR followed by 4 characters for
       the TYPE - white space is optional between them. Any other
       characters  on  this line are ignored.  Continuation lines
       (starting with a '&gt;') are also ignored i.e. only the  ini-
       tial offset lines are used.

       Using  the  <i>-magic</i>  option may significantly increase pro-
       cessing time as each file has to opened and read  to  find
       it's magic number.

       In  summary,  for all files, the default CREATOR is 'unix'
       and the default TYPE is 'TEXT'.  These can be  changed  by
       using entries in the <i>.mkisofsrc</i> file.

       If  the  a  file is in one of the known Apple/Unix formats
       (and the format has been selected), then the  CREATOR  and
       TYPE  are  taken  from the values stored in the Apple/Unix
       file.

       Other files can have their CREATOR and TYPE set from their
       file name extension (the <i>-map</i> option), or their magic num-
       ber (the <i>-magic</i> option). If the default match is  used  in
       the  <i>mapping</i>  file, then these values override the default
       CREATOR and TYPE.

       A   full   CREATOR/TYPE   database   can   be   found   at
       http://www.angelfire.com/il/szekely/index.html

<H2>MACINTOSH FILE FORMATS</H2>
       Macintosh  files  have  two  parts  called  the  <i>Data</i>  and
       <i>Resource</i> fork. Either may be empty. Unix (and  many  other
       OSs)  can  only cope with files having one part (or fork).
       To  add  to  this,  Macintosh  files  have  a  number   of
       attributes associated with them - probably the most impor-
       tant are the TYPE and CREATOR. Again Unix has  no  concept
       of these types of attributes.

       Therefore  to store a Macintosh file on a Unix filesystem,
       a way has to be found to cope with the two forks  and  the
       extra  attributes  (which  are  referred  to as the <i>finder</i>
       <i>info).</i>  Unfortunately, it seems that every software  pack-
       age  that stores Macintosh files on Unix has chosen a com-
       pletely different storage method.

       The Apple/Unix formats that <i>mkhybrid</i> (partially)  supports
       are:

       CAP AUFS format
              Data  fork  stored in file. Resource fork in subdi-
              rectory .resource with same filename as data  fork.
              Finder  info  in .finderinfo subdirectory with same
              filename.

       AppleDouble/Netatalk
              Data fork stored in file. Resource fork  stored  in
              file  with same name prefixed with "%". Finder info
              also stored in same "%"  file.  Netatalk  uses  the
              same   format,  but  the  resource  fork/finderinfo
              stored in subdirectory .AppleDouble with same  name
              as data fork.

       AppleSingle
              Data structures similar to above, except both forks
              and finder info are stored in one file.

       Helios EtherShare
              Data fork stored in file. Resource fork and  finder
              info together in subdirectory .rsrc with same file-
              name as data fork.

       IPT UShare
              Very similar to  the  EtherShare  format,  but  the
              finder info is stored slightly differently.

       MacBinary
              Both forks and finder info stored in one file.

       Apple PC Exchange
              Used  by  Macintoshes  to  store Apple files on DOS
              (FAT) disks.  Data fork stored  in  file.  Resource
              fork     in     subdirectory    resource.frk    (or
              RESOURCE.FRK). Finder info as one  record  in  file
              finder.dat (or FINDER.DAT). Separate finder.dat for
              each data fork  directory.   Note:  files  must  be
              accessed  directly  from  the DOS media as <i>mkhybrid</i>
              needs to find out  the  native  FAT  cluster  size.
              Therefore this may not work if the files are copied
              to other disks before running mkhybrid.

       SGI/XINET
              Used by SGI machines when  they  mount  HFS  disks.
              Data  fork  stored in file. Resource fork in subdi-
              rectory .HSResource with same name. Finder info  as
              one record in file .HSancillary. Separate .HSancil-
              lary for each data fork directory.

       <i>mkhybrid</i> will attempt to set the CREATOR, TYPE,  date  and
       possibly  other  flags from the finder info. Additionally,
       if it exists, the  Macintosh  filename  is  set  from  the
       finder  info, otherwise the Macintosh name is based on the
       Unix filename -  see  the  MACINTOSH  FILE  NAMES  section
       below.

       When  using  the  <i>-apple</i>  option, the TYPE and CREATOR are
       stored in the optional System Use or  SUSP  field  in  the
       ISO9660  Directory  Record  -  in much the same way as the
       Rock Ridge attributes are. In fact to make life easy,  the
       Apple  extensions are added at the beginning of the exist-
       ing Rock Ridge attributes (i.e. to get  the  Apple  exten-
       sions you get the Rock Ridge extensions as well).

       The  Apple  extensions  require  the  resource  fork to be
       stored as an ISO9660 <i>associated</i> file. This  is  just  like
       any  normal  file  stored in the ISO9660 filesystem except
       that the associated file flag  is  set  in  the  Directory
       Record  (bit  2).  This file has the same name as the data
       fork (the file seen  by  non-Apple  machines).  Associated
       files are normally ignored by other OSs

       When  using  the  <i>-hfs</i>  option,  the TYPE and CREATOR plus
       other finder info, are stored in a separate HFS directory,
       not  visible on the ISO9660 volume. The HFS directory ref-
       erences the same data and resource  fork  files  described
       above.

       In most cases, it is better to use the <i>-hfs</i> option instead
       of the <i>-apple</i> option, as the latter  imposes  the  limited
       ISO9660  characters  allowed  in  filenames.  However, the
       Apple extensions do give the advantage that the files  are
       packed on the disk more efficiently and it may be possible
       to fit more files on a CD - important when the total  size
       of the source files is approaching 650MB.

<H2>MACINTOSH FILE NAMES</H2>
       Where  possible,  the  HFS filename that is stored with an
       Apple/Unix file is used for the HFS part of the  CD.  How-
       ever, not all the Apple/Unix encodings store the HFS file-
       name with the finderinfo. In these cases, the  Unix  file-
       name  is  used  - with escaped special characters. Special
       characters include '/' and characters with codes over 127.

       Aufs escapes these characters by using ":" followed by the
       character code as two hex digits. Netatalk and  EtherShare
       has a similar scheme, but uses "%" instead of a ":".

       If  mkhybrid  can't find an HFS filename, then it uses the
       Unix name, with any %xx or :xx characters (xx ==  two  hex
       digits)  converted to a single character code. If "xx" are
       not hex digits ([0-9a-fA-F]), then they are left  alone  -
       although any remaining ":" is converted to "%" as colon is
       the HFS directory separator. Care must  be  taken,  as  an
       ordinary Unix file with %xx or :xx will also be converted.
       e.g.

       This:2fFile    converted to   This/File
       This:File      converted to   This%File
       This:t7File    converted to   This%t7File

       Although HFS filenames appear to support upper  and  lower
       case letters, the filesystem is case insensitive. i.e. the
       filenames "aBc" and "AbC" are the same. If a file is found
       in  a directory with the same HFS name, then <i>mkhybrid</i> will
       attempt, where possible, to make a unique name  by  adding
       '_' characters to one of the filenames.

       If  an  HFS  filename exists for a file, then mkhybrid can
       use this name as  the  starting  point  for  the  ISO9660,
       Joliet  and  Rock  Ridge  filenames  using  the  <i>-mac-name</i>
       option. e.g.

       If a <i>MacBinary</i> (or <i>PC</i> <i>Exchange</i>) file is stored as  <i>someim-</i>
       <i>age.gif.bin</i>  on  the  Unix  filesystem, but contains a HFS
       file called <i>someimage.gif</i>, then  this  is  the  name  that
       would  appear on the HFS part of the CD. However, as mkhy-
       brid uses the Unix name as  the  starting  point  for  the
       other names, then the ISO9660 name generated will probably
       be <i>SOMEIMAG.BIN</i> and the Joliet/Rock Ridge would be <i>someim-</i>
       <i>age.gif.bin</i>.  Although the actual data (in this case) is a
       GIF image. This option will use the HFS  filename  as  the
       starting  point  and  the  ISO9660  name  will probably be
       <i>SOMEIMAG.GIF</i> and the Joliet/Rock Ridge  would  be  <i>someim-</i>
       <i>age.gif</i>.

       Using  the  <i>-mac-name</i>  option will not currently work with
       the <i>-T</i> option  -  the  Unix  name  will  be  used  in  the
       TRANS.TBL, not the Macintosh name.

       The  existing  mkisofs  code  will  filter out any illegal
       characters for the ISO9660 and Joliet  filenames,  but  as
       mkisofs expects to be dealing directly with Unix names, it
       leaves the Rock Ridge names as is.  But as '/' is a  legal
       HFS  filename  character, the <i>-mac-name</i> option coverts '/'
       to a '_' in a Rock Ridge filenames.

       If the Apple extensions are used, then  only  the  ISO9660
       filenames  will  appear  on the Macintosh. However, as the
       Macintosh ISO9660 drivers can use <i>Level</i> <i>2</i> filenames,  then
       you  can use the <i>-l</i> option without problems on a Macintosh
       -  still  take  care   over   the   names,   for   example
       <i>this.file.name</i>  will  be  converted to <i>THIS.FILE</i> i.e. only
       have one '.', also  filename  <i>abcdefgh</i>  will  be  seen  as
       <i>ABCDEFGH</i>  but  <i>abcdefghi</i>  will be seen as <i>ABCDEFGHI.</i>  i.e.
       with a '.' at the end - don't know if this is a  Macintosh
       problem or mkisofs/mkhybrid problem. All filenames will be
       in uppercase  when  viewed  on  a  Macintosh.  Of  course,
       DOS/Win3.X  machines will not be able to see Level 2 file-
       names...

<H2>HFS BOOT DRIVER</H2>
       It <i>may</i> be possible to make the hybrid  CD  bootable  on  a
       Macintosh.

       A bootable HFS CD requires an Apple CD-ROM (or compatible)
       driver, a bootable HFS partition and the necessary System,
       Finder, etc. files.

       A driver can be obtained from any other Macintosh bootable
       CD-ROM using the <i>apple</i><b>_</b><i>driver</i> utility. This file can  then
       be used with the <i>-boot-hfs-file</i> option.

       The  HFS partition (i.e. the hybrid disk in our case) must
       contain a suitable System Folder, again from  another  CD-
       ROM or disk.

       For  a  partition  to  be bootable, it must have it's <i>boot</i>
       <i>block</i> set. The boot block is in the first two blocks of  a
       partition.  For a non-bootable partition the boot block is
       full of zeros. Normally, when a System file is  copied  to
       partition  on  a  Macintosh disk, the boot block is filled
       with a number of required settings - unfortunately I don't
       know  the  full  spec  for the boot block, so I'm guessing
       that the following will work OK.

       Therefore, the utility <i>apple</i><b>_</b><i>driver</i> also extracts the boot
       block  from  the first HFS partition it finds on the given
       CD-ROM and this is used for the HFS partition  created  by
       <i>mkhybrid</i>.

       PLEASE NOTE
              By  using  a  driver  from  an Apple CD and copying
              Apple software to your CD,  you  become  liable  to
              obey  Apple  Computer, Inc. Software License Agree-
              ments.

<H2>CONFIGURATION</H2>
       <b>mkhybrid</b> looks for the <i>.mkisofsrc</i> file, first in the  cur-
       rent working directory, then in the user's home directory,
       and then in the directory in which the <b>mkhybrid</b> binary  is
       stored.  This file is assumed to contain a series of lines
       of the form "TAG=value", and in this way you  can  specify
       certain  options.  The case of the tag is not significant.
       Some fields in the volume header are not settable  on  the
       command  line,  but  can be altered through this facility.
       Comments may be placed in this  file,  using  lines  which
       start with a hash (#) character.

       APPI   The  application  identifier  should  describe  the
              application that will be on  the  disc.   There  is
              space  on  the  disc for 128 characters of informa-
              tion.  May be overridden using the -A command  line
              option.

       COPY   The copyright information, often the name of a file
              on the disc containing the copyright notice.  There
              is  space in the disc for 37 characters of informa-
              tion.

       ABST   The abstract information, often the name of a  file
              on the disc containing an abstract.  There is space
              in the disc for 37 characters of information.

       BIBL   The bibliographic information, often the name of  a
              file  on the disc containing a bibliography.  There
              is space in the disc for 37 characters of  informa-
              tion.

       PREP   This  should  describe  the  preparer of the CDROM,
              usually with a mailing address  and  phone  number.
              There  is  space  on the disc for 128 characters of
              information.  May be overridden using the  -p  com-
              mand line option.

       PUBL   This  should  describe  the publisher of the CDROM,
              usually with a mailing address  and  phone  number.
              There  is  space  on the disc for 128 characters of
              information.  May be overridden using the  -P  com-
              mand line option.

       SYSI   The  System Identifier.  There is space on the disc
              for 32 characters of information.

       VOLI   The Volume Identifier.  There is space on the  disc
              for  32 characters of information.  May be overrid-
              den using the -V command line option.

       VOLS   The Volume Set Name.  There is space  on  the  disc
              for 278 characters of information.

       TYPE   The  default  TYPE  for  Macintosh  files.  Must be
              exactly 4 characters.

       CREATOR
              The default CREATOR for Macintosh  files.  Must  be
              exactly 4 characters.

       <b>mkhybrid</b>  can  also  be  configured  at  compile time with
       defaults  for  many  of  these  fields.   See   the   file
       defaults.h.

<H2>AUTHOR</H2>
       <b>mkisofs</b> is not based on the standard mk*fs tools for unix,
       because we must generate a complete  copy of  an  existing
       filesystem on a disk in the  iso9660 filesystem.  The name
       mkisofs is probably a bit of a misnomer, since it not only
       creates  the filesystem, but it also populates it as well.

       Eric       Youngdale       &lt;ericy@gnu.ai.mit.edu&gt;       or
       &lt;eric@andante.jic.com&gt;  wrote  both  the  Linux  isofs9660
       filesystem and the mkisofs utility, and is currently main-
       taining  them.   The  copyright for the mkisofs utility is
       held by Yggdrasil Computing, Incorporated.

       <b>mkhybrid</b> is based on <b>mkisofs</b> and works in exactly the same
       way as <b>mkisofs</b> without the HFS options. The change in name
       is to signify that it does something extra. If you do  not
       need  the  HFS  options,  then  you should really be using
       <i>mkisofs</i>.

       HFS hybrid code Copyright (C) James Pearson 1997, 1998
       libhfs code Copyright (C) 1996, 1997 Robert Leslie
       libfile code Copyright (C) Ian F. Darwin 1986, 1987, 1989,
       1990, 1991, 1992, 1994, 1995.

<H2>BUGS</H2>
       Any  files  that  have hard links to files not in the tree
       being copied to the iso9660 filesystem will have an incor-
       rect file reference count.

       There  may be some other ones.  Please, report them to the
       author.

HFS PROBLEMS/LIMITATIONS
       I have had to make several assumptions on how I expect the
       modified  libhfs  routines  to  work, however there may be
       situations that either  I  haven't  thought  of,  or  come
       across  when  these  assumptions  fail.  Therefore I can't
       guarantee that mkhybrid will work as expected (although  I
       haven't had a major problem yet).

       Output  volume size must be at least 800Kb (libhfs limit -
       shouldn't really be a problem).

       Although HFS filenames appear to support upper  and  lower
       case letters, the filesystem is case insensitive. i.e. the
       filenames "aBc" and "AbC" are the same. If a file is found
       in  a directory with the same HFS name, then <i>mkhybrid</i> will
       attempt, where possible, to make a unique name  by  adding
       '_' characters to one of the filenames.

       HFS  file/directory  names that share the first 31 charac-
       ters have _N' (N == decimal number)  substituted  for  the
       last few characters to generate unique names.

       Care  must  be  taken  when "grafting" Apple/Unix files or
       directories  (see  above  for  the   method   and   syntax
       involved).  It  is  not  possible to use a new name for an
       Apple/Unix encoded file/directory. e.g.  If  a  Apple/Unix
       encoded  file called "oldname" is to added to the CD, then
       you can not use the command line:

              mkhybrid -o output.raw -hfs newname=oldname cd_dir

       mkhybrid will be unable to decode "oldname". However,  you
       can  graft Apple/Unix encoded files or directories as lond
       as you do not atempt to give then new names as above.

       The <i>-M</i> option has no real meaning with an HFS volume.

       Symbolic links (as with all other non-regular  files)  are
       not added to the HFS directory.

       Hybrid  volumes  may  be  larger than pure ISO9660 volumes
       containing the same data.

       The resulting hybrid volume can  be  accessed  on  a  Unix
       machine  by  using  the  hfsutils  routines.  However,  no
       changes should be made to the contents of  the  volume  as
       it's not a "real" HFS volume.

       Using  the  <i>-mac-name</i>  option will not currently work with
       the <i>-T</i> option  -  the  Unix  name  will  be  used  in  the
       TRANS.TBL, not the Macintosh name.

       Although  <i>mkhybrid</i>  does not alter the contents of a file,
       if a binary file has it's TYPE set as 'TEXT',  it  <i>may</i>  be
       read incorrectly on a Macintosh. Therefore a better choice
       for the default TYPE may be '????'

       The <i>-mac-boot-file</i> option may not work at all...

<H2>SEE ALSO</H2>
       <i>mkisofs</i>(8), <i>magic</i>(5), <i>apple</i><b>_</b><i>driver</i>(8)

<H2>FUTURE IMPROVEMENTS</H2>
       Some sort of gui interface.

<H2>AVAILABILITY</H2>
       <b>mkisofs</b> is available for anonymous ftp from tsx-11.mit.edu
       in   /pub/linux/packages/mkisofs  and  many  other  mirror
       sites.

       <b>mkhybrid</b>           is            available            from
       ftp://ftp.ge.ucl.ac.uk/pub/mkhfs    and    <b>hfsutils</b>   from
       ftp://ftp.mars.org/pub/hfs

Version 1.12a4.5                                            26 July 1998

</PRE>
